• ## 오늘 작업 요약 (Markdown)

  ### 1) fixed_ref 모델 정리

  - 파일: fir_1d/model/python/fir_1d_fixed_ref.py
  - 반영 내용:
  - data_bits 파라미터 제거, 픽셀 입출력 uint8(0~255) 정책 고정
  - coeff_bits 허용값 검증 추가 (8/16/32/64 외 ValueError)
  - h 검증 강화:
      - h=[] 금지
      - NaN/Inf 금지
      - Q-format 실수 범위 초과 시 ValueError
  - x 검증/전처리 정책 확정:
      - NaN/Inf 금지
      - np.rint 뱅커스 라운딩 적용
      - [0,255] saturation
  - MAC 경로에서 int(...) 사용해 연산 안정성 확보
  - 최종 반환 np.ndarray(dtype=np.uint8) 유지

  ———

  ### 2) 스펙 문서 동기화

  - 파일: fir_1d/docs/fir_1d_golden_spec.md
  - 반영 내용:
  - Fixed 모델 시그니처/파라미터를 코드와 일치시킴 (data_bits 제거)
  - x 정책을 명시:
      - finite 검사
      - np.rint round-to-nearest-even
      - [0,255] saturation
  - h 정책을 명시:
      - 빈 계수 금지
      - finite 검사
      - Q-format 범위 검증
  - 출력 계약 명시:
      - 길이 N
      - [0,255] saturation
      - np.uint8 ndarray 반환

  ———

  ### 3) 테스트 확장

  - 파일: fir_1d/sim/tests/test_1d_fixed.py
  - 추가/정리 내용:
  - 정상 케이스:
      - full-scale impulse 응답
      - ideal 모델과 비교 가능한 안전 케이스
  - x 정책 테스트:
      - NaN/Inf 예외
      - 뱅커스 라운딩 동작
      - saturation 동작
  - h 정책 테스트:
      - 빈 계수 예외
      - NaN 예외
      - Q1.7 경계 허용/범위 초과 예외
  - 파라미터/출력 계약 테스트:
      - invalid coeff_bits 예외
      - frac_bits, acc_bits 비정상 입력 예외
      - 출력 dtype/길이/범위 검증

  ———

  ### 4) RTL용 골든 벡터 생성 파이프라인 추가

  - 파일: fir_1d/sim/vector/generate_fixed_vectors.py
  - 생성 결과:
  - fir_1d/sim/vector/case00_*
  - fir_1d/sim/vector/case01_*
  - fir_1d/sim/vector/case02_*
  - fir_1d/sim/vector/case03_*
  - fir_1d/sim/vector/fixed_vector_manifest.json
  - 포맷:
  - .mem = hex 라인 포맷 (u8/s8)
  - .json = 케이스/파라미터/전처리/양자화/파일 매핑 메타정보

  ———

  ### 5) 실행/검증

  - 벡터 생성 명령 정리:

  uv run -m fir_1d.sim.vector.generate_fixed_vectors

  - 스크립트는 -m 모듈 실행 기준으로 동작하도록 정리함 (sys.path 주입 제거)

  ———

  ### 6) 워크플로우 합의 사항

  - 1D는 기능/검증 체인 안정화에 충분히 의미 있음
  - 2D 완료 후 Vivado에서 자원/타이밍/Fmax 분석하는 전략이 효율적
  - iverilog/verilator는 기능 검증, Vivado는 합성/구현/타이밍 검증 역할로 분리
    해서 진행하기로 함
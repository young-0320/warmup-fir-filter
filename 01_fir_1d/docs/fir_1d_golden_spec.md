# FIR 1D Golden Specification

## 1. 목적
본 문서는 `model/python/fir_1d_ref.py`의 `fir_1d_golden(x, h)` 동작을 골든 레퍼런스 스펙으로 정의한다.
이 스펙은 RTL/CPP 구현 검증 시 정답(reference output) 생성 기준으로 사용한다.

## 2. 함수 시그니처
- 함수명: `fir_1d_golden`
- 입력:
  - `x`: 입력 시퀀스 (길이 `N`)
  - `h`: FIR 탭 계수 시퀀스 (길이 `L`)
- 출력:
  - `y`: 출력 시퀀스 (길이 `Ny = N + L - 1`)

## 3. 수학적 정의
출력 `y[n]`은 다음과 같이 정의한다.

`y[n] = Σ_{k=0}^{L-1} h[k] * x[n-k]`, 단 `0 <= n-k < N` 인 항만 유효

즉, 유효 인덱스 범위를 벗어나는 `x[n-k]`는 0으로 간주한 선형 컨볼루션(linear convolution)이다.

## 4. 인덱스 및 경계 규칙
- `n` 범위: `0` 부터 `Ny-1` 까지
- `k` 범위: `0` 부터 `L-1` 까지
- 누산 조건:
  - `0 <= n-k < N` 이면 `result += h[k] * x[n-k]`
  - 그 외는 누산하지 않음

## 5. 알고리즘 절차 (레퍼런스 동작)
1. `N = len(x)`, `L = len(h)`, `Ny = N + L - 1` 계산
2. `y`를 길이 `Ny`의 0.0 배열로 초기화
3. 각 `n`에 대해:
   - `result = 0.0`
   - 각 `k`에 대해 경계 조건을 만족하면 `h[k] * x[n-k]` 누산
   - `y[n] = result`
4. `y` 반환

## 6. 동치성 요구사항 (CPP/RTL 검증 기준)
CPP/RTL 구현은 아래 조건을 만족해야 한다.
- 출력 길이: 정확히 `N + L - 1`
- 탭 순서: `h[0]`가 가장 최근 입력 `x[n]`에 곱해지는 구조 (`x[n-k]`)
- 경계 처리: 유효 범위 외 입력은 0 패딩과 동등한 결과
- 출력 값: 동일 입력 `x`, `h`에 대해 본 스펙과 수치적으로 일치

## 7. 비범위 항목
아래는 본 골든 스펙의 범위 밖이다.
- 입력 타입/빈 입력/예외 처리 정책
- 고정소수점 양자화/포화/반올림
- 성능 최적화(루프 언롤, SIMD, 파이프라이닝)

## 8. 원본 레퍼런스
- `model/python/fir_1d_ref.py`
